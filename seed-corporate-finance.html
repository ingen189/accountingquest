<!DOCTYPE html>
<html lang="no">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Seed Corporate Finance - AccountingQuest</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
            background: #1a1a2e;
            color: #e0e0e0;
            min-height: 100vh;
            padding: 30px;
        }
        .container { max-width: 900px; margin: 0 auto; }
        h1 { color: #4ade80; margin-bottom: 20px; }
        .card {
            background: #2d2d44;
            border-radius: 12px;
            padding: 25px;
            margin-bottom: 20px;
        }
        .btn {
            padding: 15px 30px;
            border: none;
            border-radius: 8px;
            font-size: 1.1em;
            cursor: pointer;
            margin: 5px;
            transition: all 0.3s;
        }
        .btn-primary { background: #4ade80; color: #1a1a2e; }
        .btn-primary:hover { background: #22c55e; transform: translateY(-2px); }
        .btn-danger { background: #ef4444; color: white; }
        .btn-danger:hover { background: #dc2626; }
        .btn:disabled { opacity: 0.5; cursor: not-allowed; }
        
        .log {
            background: #1a1a2e;
            border: 1px solid #404040;
            border-radius: 8px;
            padding: 15px;
            height: 300px;
            overflow-y: auto;
            font-family: monospace;
            font-size: 0.9em;
        }
        .log-entry { padding: 5px 0; border-bottom: 1px solid #333; }
        .log-success { color: #4ade80; }
        .log-error { color: #ef4444; }
        .log-info { color: #3b82f6; }
        
        .stats {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: 15px;
            margin-bottom: 20px;
        }
        .stat {
            background: #3d3d5c;
            padding: 15px;
            border-radius: 8px;
            text-align: center;
        }
        .stat-value { font-size: 2em; font-weight: bold; color: #4ade80; }
        .stat-label { color: #9ca3af; font-size: 0.9em; }
        
        .progress-bar {
            height: 8px;
            background: #404040;
            border-radius: 4px;
            overflow: hidden;
            margin-top: 15px;
        }
        .progress-fill {
            height: 100%;
            background: #4ade80;
            transition: width 0.3s;
        }
        
        .user-info {
            background: #3d3d5c;
            padding: 10px 15px;
            border-radius: 8px;
            margin-bottom: 20px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>üíπ Seed Corporate Finance Data</h1>
        
        <div class="user-info">
            <span>Bruker: <strong id="user-email">Laster...</strong></span>
            <span>UID: <code id="user-uid">-</code></span>
        </div>
        
        <div class="stats">
            <div class="stat">
                <div class="stat-value" id="total-questions">0</div>
                <div class="stat-label">Totalt sp√∏rsm√•l</div>
            </div>
            <div class="stat">
                <div class="stat-value" id="npv-count">0</div>
                <div class="stat-label">NPV/IRR</div>
            </div>
            <div class="stat">
                <div class="stat-value" id="wacc-count">0</div>
                <div class="stat-label">WACC/CAPM</div>
            </div>
            <div class="stat">
                <div class="stat-value" id="bonds-count">0</div>
                <div class="stat-label">Obligasjoner</div>
            </div>
            <div class="stat">
                <div class="stat-value" id="portfolio-count">0</div>
                <div class="stat-label">Portef√∏lje</div>
            </div>
        </div>
        
        <div class="card">
            <h3>üöÄ Handlinger</h3>
            <p style="margin: 10px 0; color: #9ca3af;">
                Klikk for √• seede data til Firebase. Dette trengs bare √©n gang - dataene blir permanente.
            </p>
            
            <button class="btn btn-primary" onclick="seedAll()" id="seed-btn">
                üå± Seed Alt (Sp√∏rsm√•l + L√∏sninger)
            </button>
            <button class="btn btn-danger" onclick="clearAll()" id="clear-btn">
                üóëÔ∏è Slett Alt
            </button>
            <button class="btn" onclick="checkExisting()" style="background: #3b82f6; color: white;">
                üîç Sjekk Eksisterende
            </button>
            
            <div class="progress-bar">
                <div class="progress-fill" id="progress" style="width: 0%"></div>
            </div>
        </div>
        
        <div class="card">
            <h3>üìã Logg</h3>
            <div class="log" id="log"></div>
        </div>
    </div>
    
    <!-- Firebase -->
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-auth-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-database-compat.js"></script>
    
    <script>
        // Firebase config
        const firebaseConfig = {
            apiKey: "AIzaSyAPuacYOSf4Hv-h36yA5Hav67SlpIFMIIQ",
            authDomain: "accountingquest-multiplayer.firebaseapp.com",
            databaseURL: "https://accountingquest-multiplayer-default-rtdb.europe-west1.firebasedatabase.app",
            projectId: "accountingquest-multiplayer",
            storageBucket: "accountingquest-multiplayer.appspot.com",
            messagingSenderId: "155094858270",
            appId: "1:155094858270:web:abc123"
        };
        
        firebase.initializeApp(firebaseConfig);
        const auth = firebase.auth();
        const db = firebase.database();
        
        const ADMIN_UID = '4fmvu6yn2UVB7rxM4L5pJUWnme72';
        
        // ==========================================
        // CORPORATE FINANCE SEED DATA
        // ==========================================
        
        const CORPORATE_FINANCE_DATA = {
            metadata: {
                module: "corporate_finance",
                version: "2.0.0",
                lastUpdated: new Date().toISOString(),
                topics: ["npv", "irr", "wacc", "capm", "bonds", "stocks", "portfolio", "options", "leverage"]
            },
            
            exercises: [
                // ========== NPV EXERCISES ==========
                {
                    id: "cf_npv_001",
                    topic: "npv",
                    difficulty: "easy",
                    type: "calculation",
                    title: "Enkel NPV Beregning",
                    description: "En bedrift vurderer en investering p√• 100 000 kr som gir 30 000 kr √•rlig i 5 √•r. Avkastningskrav er 10%. Beregn NPV.",
                    data: { investment: 100000, annualCF: 30000, years: 5, rate: 0.10 },
                    solution: { npv: 13723, tolerance: 100 },
                    formula: "NPV = -I + Œ£(CF/(1+r)^t)",
                    hints: ["Bruk annuitetsformel", "PV = CF √ó [(1-(1+r)^-n)/r]"],
                    source: "B√òK260"
                },
                {
                    id: "cf_npv_002",
                    topic: "npv",
                    difficulty: "medium",
                    type: "calculation",
                    title: "NPV med Arbeidskapital",
                    description: "Investering: 500 000 kr. Arbeidskapital: 50 000 kr. √Örlig CF: 150 000 kr i 5 √•r. Restverdi: 75 000 kr. r = 12%. Beregn NPV.",
                    data: { investment: 500000, workingCapital: 50000, annualCF: 150000, years: 5, salvage: 75000, rate: 0.12 },
                    solution: { npv: 83045, tolerance: 500 },
                    hints: ["Arbeidskapital frigj√∏res ved prosjektslutt", "Restverdi kommer i √•r 5"],
                    source: "B√òK260"
                },
                {
                    id: "cf_npv_003",
                    topic: "npv",
                    difficulty: "hard",
                    type: "calculation",
                    title: "NPV med Alternativkostnad",
                    description: "TikTok-influenser f√•r 11 mill forskudd for bok. Boken tar 1 √•r. Alternativkostnad (tapte foredrag): 8 mill. Kapitalkostnad: 10%. Beregn NPV.",
                    data: { advance: 11000000, opportunityCost: 8000000, rate: 0.10 },
                    solution: { npv: 3730000, tolerance: 50000 },
                    formula: "NPV = Forskudd - PV(Alternativkostnad) = 11 - 8/1.10",
                    source: "B√òK260 2023 Q16"
                },
                
                // ========== IRR EXERCISES ==========
                {
                    id: "cf_irr_001",
                    topic: "irr",
                    difficulty: "easy",
                    type: "multiple_choice",
                    title: "IRR Definisjon",
                    question: "Internal Rate of Return (IRR) er:",
                    options: [
                        { id: "a", text: "Renten som gir NPV = 0", correct: true },
                        { id: "b", text: "Gjennomsnittlig avkastning" },
                        { id: "c", text: "Risikofri rente pluss risikopremie" },
                        { id: "d", text: "WACC justert for prosjektrisiko" }
                    ],
                    explanation: "IRR er diskonteringsrenten som gj√∏r at n√•verdien av alle kontantstr√∏mmer blir null."
                },
                {
                    id: "cf_irr_002",
                    topic: "irr",
                    difficulty: "medium",
                    type: "multiple_choice",
                    title: "IRR Problem",
                    question: "N√•r kan IRR gi feil beslutning?",
                    options: [
                        { id: "a", text: "Ved gjensidig utelukkende prosjekter", correct: true },
                        { id: "b", text: "N√•r NPV er positiv" },
                        { id: "c", text: "Ved korte prosjekter" },
                        { id: "d", text: "N√•r WACC er lav" }
                    ],
                    explanation: "Ved gjensidig utelukkende prosjekter kan IRR og NPV gi ulik rangering pga. ulik st√∏rrelse eller timing."
                },
                {
                    id: "cf_irr_003",
                    topic: "irr",
                    difficulty: "medium",
                    type: "calculation",
                    title: "IRR Beregning",
                    description: "Beregn IRR for bokavtalen: 11 mill forskudd i dag, 8 mill alternativkostnad etter 1 √•r.",
                    data: { cf0: 11000000, cf1: -8000000 },
                    solution: { irr: -27.27, tolerance: 0.5 },
                    formula: "0 = 11 - 8/(1+r) ‚Üí r = 8/11 - 1 = -27.27%",
                    hints: ["Dette er en l√•netransaksjon (positiv CF f√∏rst, negativ etterp√•)"],
                    source: "B√òK260 2023 Q17"
                },
                
                // ========== WACC EXERCISES ==========
                {
                    id: "cf_wacc_001",
                    topic: "wacc",
                    difficulty: "easy",
                    type: "multiple_choice",
                    title: "WACC Komponenter",
                    question: "WACC inkluderer IKKE:",
                    options: [
                        { id: "a", text: "Kostnad for egenkapital" },
                        { id: "b", text: "Kostnad for gjeld etter skatt" },
                        { id: "c", text: "Inflasjonspremie", correct: true },
                        { id: "d", text: "Kapitalstrukturvekter" }
                    ],
                    explanation: "WACC = (E/V)√óRe + (D/V)√óRd√ó(1-T). Inflasjon er ikke en separat komponent."
                },
                {
                    id: "cf_wacc_002",
                    topic: "wacc",
                    difficulty: "medium",
                    type: "calculation",
                    title: "WACC Beregning",
                    description: "E = 60%, D = 40%, Re = 12%, Rd = 6%, Skatt = 22%. Beregn WACC.",
                    data: { equityWeight: 0.60, debtWeight: 0.40, costEquity: 0.12, costDebt: 0.06, taxRate: 0.22 },
                    solution: { wacc: 9.07, tolerance: 0.1 },
                    formula: "WACC = 0.60√ó12% + 0.40√ó6%√ó(1-0.22) = 7.2% + 1.87% = 9.07%"
                },
                {
                    id: "cf_wacc_003",
                    topic: "wacc",
                    difficulty: "hard",
                    type: "calculation",
                    title: "Unlever og Relever Beta",
                    description: "Levered Œ≤ = 1.5, D/E = 0.8, Skatt = 25%. Finn unlevered beta.",
                    data: { betaLevered: 1.5, deRatio: 0.8, taxRate: 0.25 },
                    solution: { betaUnlevered: 0.94, tolerance: 0.05 },
                    formula: "Œ≤U = Œ≤L / [1 + (1-T)√ó(D/E)] = 1.5 / [1 + 0.75√ó0.8]"
                },
                
                // ========== CAPM EXERCISES ==========
                {
                    id: "cf_capm_001",
                    topic: "capm",
                    difficulty: "easy",
                    type: "calculation",
                    title: "CAPM Avkastning",
                    description: "Rf = 3%, Rm = 10%, Œ≤ = 1.2. Beregn forventet avkastning med CAPM.",
                    data: { riskFree: 0.03, marketReturn: 0.10, beta: 1.2 },
                    solution: { expectedReturn: 11.4, tolerance: 0.1 },
                    formula: "E(R) = Rf + Œ≤√ó(Rm - Rf) = 3% + 1.2√ó7% = 11.4%"
                },
                {
                    id: "cf_capm_002",
                    topic: "capm",
                    difficulty: "medium",
                    type: "multiple_choice",
                    title: "Beta Tolkning",
                    question: "En aksje med Œ≤ = 0.5 betyr at:",
                    options: [
                        { id: "a", text: "Aksjen svinger halvparten s√• mye som markedet", correct: true },
                        { id: "b", text: "Aksjen har 50% avkastning" },
                        { id: "c", text: "Aksjen er dobbelt s√• risikabel" },
                        { id: "d", text: "Aksjen er ukorrelert med markedet" }
                    ],
                    explanation: "Œ≤ < 1 betyr lavere systematisk risiko enn markedet."
                },
                
                // ========== OBLIGASJONER ==========
                {
                    id: "cf_bond_001",
                    topic: "bonds",
                    difficulty: "easy",
                    type: "calculation",
                    title: "Obligasjonspris",
                    description: "Obligasjon: P√•lydende 1000 kr, kupong 5%, 3 √•r til forfall, YTM = 6%. Beregn pris.",
                    data: { faceValue: 1000, couponRate: 0.05, years: 3, ytm: 0.06 },
                    solution: { price: 973.27, tolerance: 1 },
                    formula: "P = Œ£(C/(1+r)^t) + FV/(1+r)^n"
                },
                {
                    id: "cf_bond_002",
                    topic: "bonds",
                    difficulty: "medium",
                    type: "multiple_choice",
                    title: "Renterisiko",
                    question: "Hvilken obligasjon har h√∏yest renterisiko?",
                    options: [
                        { id: "a", text: "30 √•r, lav kupong", correct: true },
                        { id: "b", text: "5 √•r, h√∏y kupong" },
                        { id: "c", text: "10 √•r, middels kupong" },
                        { id: "d", text: "1 √•r, nullkupong" }
                    ],
                    explanation: "Lang l√∏petid + lav kupong = h√∏y durasjon = h√∏y renterisiko."
                },
                {
                    id: "cf_bond_003",
                    topic: "bonds",
                    difficulty: "hard",
                    type: "calculation",
                    title: "Current Yield vs YTM",
                    description: "Obligasjon handles til 950 kr, p√•lydende 1000 kr, kupong 60 kr √•rlig. Beregn current yield.",
                    data: { price: 950, faceValue: 1000, coupon: 60 },
                    solution: { currentYield: 6.32, tolerance: 0.1 },
                    formula: "Current Yield = √Örlig kupong / Pris = 60/950 = 6.32%"
                },
                
                // ========== PORTEF√òLJE ==========
                {
                    id: "cf_port_001",
                    topic: "portfolio",
                    difficulty: "easy",
                    type: "calculation",
                    title: "Portef√∏ljeavkastning",
                    description: "Portef√∏lje: 60% aksje A (avk 12%), 40% aksje B (avk 8%). Beregn forventet avkastning.",
                    data: { weightA: 0.60, returnA: 0.12, weightB: 0.40, returnB: 0.08 },
                    solution: { portfolioReturn: 10.4, tolerance: 0.1 },
                    formula: "E(Rp) = w1√óR1 + w2√óR2 = 0.6√ó12% + 0.4√ó8% = 10.4%"
                },
                {
                    id: "cf_port_002",
                    topic: "portfolio",
                    difficulty: "medium",
                    type: "calculation",
                    title: "Portef√∏ljerisiko",
                    description: "œÉA = 20%, œÉB = 15%, wA = 0.5, wB = 0.5, korrelasjon = 0.3. Beregn portef√∏ljens standardavvik.",
                    data: { sigmaA: 0.20, sigmaB: 0.15, weightA: 0.5, weightB: 0.5, correlation: 0.3 },
                    solution: { portfolioSigma: 14.0, tolerance: 0.5 },
                    formula: "œÉp = ‚àö[w¬≤œÉ¬≤ + w¬≤œÉ¬≤ + 2√ów√ów√óœÉ√óœÉ√óœÅ]"
                },
                {
                    id: "cf_port_003",
                    topic: "portfolio",
                    difficulty: "medium",
                    type: "multiple_choice",
                    title: "Diversifiseringseffekt",
                    question: "Diversifiseringsgevinsten er st√∏rst n√•r korrelasjonen mellom aksjene er:",
                    options: [
                        { id: "a", text: "-1 (perfekt negativ)", correct: true },
                        { id: "b", text: "0 (ingen korrelasjon)" },
                        { id: "c", text: "+1 (perfekt positiv)" },
                        { id: "d", text: "+0.5 (moderat positiv)" }
                    ],
                    explanation: "Ved œÅ = -1 kan risiko elimineres helt med riktige vekter."
                },
                
                // ========== OPSJONER ==========
                {
                    id: "cf_opt_001",
                    topic: "options",
                    difficulty: "easy",
                    type: "multiple_choice",
                    title: "Call vs Put",
                    question: "En call-opsjon gir rett til √•:",
                    options: [
                        { id: "a", text: "Kj√∏pe underliggende til strike price", correct: true },
                        { id: "b", text: "Selge underliggende til strike price" },
                        { id: "c", text: "Motta dividende" },
                        { id: "d", text: "Unng√• skatt" }
                    ]
                },
                {
                    id: "cf_opt_002",
                    topic: "options",
                    difficulty: "medium",
                    type: "calculation",
                    title: "Opsjonsprofitt",
                    description: "Du kj√∏pte en call med strike 100 for 5 kr. Aksjen st√•r i 115 ved forfall. Beregn profitt.",
                    data: { strike: 100, premium: 5, stockPrice: 115 },
                    solution: { profit: 10, tolerance: 0 },
                    formula: "Profitt = max(S-K, 0) - Premium = (115-100) - 5 = 10"
                },
                {
                    id: "cf_opt_003",
                    topic: "options",
                    difficulty: "medium",
                    type: "multiple_choice",
                    title: "Protective Put",
                    question: "En protective put strategi inneb√¶rer:",
                    options: [
                        { id: "a", text: "Eie aksjen + kj√∏pe put", correct: true },
                        { id: "b", text: "Selge aksjen + kj√∏pe call" },
                        { id: "c", text: "Kj√∏pe call + selge put" },
                        { id: "d", text: "Shorte aksjen + kj√∏pe call" }
                    ],
                    explanation: "Protective put gir nedsidebeskyttelse mens du beholder oppside."
                },
                
                // ========== LEVERAGE ==========
                {
                    id: "cf_lev_001",
                    topic: "leverage",
                    difficulty: "easy",
                    type: "multiple_choice",
                    title: "Financial Leverage",
                    question: "√òkt gjeldsgrad vil typisk:",
                    options: [
                        { id: "a", text: "√òke b√•de forventet avkastning og risiko", correct: true },
                        { id: "b", text: "Redusere risiko" },
                        { id: "c", text: "Ikke p√•virke avkastning" },
                        { id: "d", text: "Redusere WACC alltid" }
                    ]
                },
                {
                    id: "cf_lev_002",
                    topic: "leverage",
                    difficulty: "medium",
                    type: "calculation",
                    title: "ROE med Leverage",
                    description: "ROA = 10%, Gjeld/EK = 1.5, Gjeldsrente = 5%, Skatt = 25%. Beregn ROE.",
                    data: { roa: 0.10, deRatio: 1.5, interestRate: 0.05, taxRate: 0.25 },
                    solution: { roe: 15.63, tolerance: 0.2 },
                    formula: "ROE = ROA + (ROA - Rd)√ó(D/E)√ó(1-T)"
                },
                
                // ========== DIVIDENDE ==========
                {
                    id: "cf_div_001",
                    topic: "stocks",
                    difficulty: "easy",
                    type: "calculation",
                    title: "Gordon Growth Model",
                    description: "Dividende neste √•r = 5 kr, vekst = 3%, avkastningskrav = 10%. Beregn aksjepris.",
                    data: { dividend: 5, growth: 0.03, requiredReturn: 0.10 },
                    solution: { price: 71.43, tolerance: 0.5 },
                    formula: "P = D1 / (r - g) = 5 / (0.10 - 0.03) = 71.43"
                },
                {
                    id: "cf_div_002",
                    topic: "stocks",
                    difficulty: "medium",
                    type: "calculation",
                    title: "Dividend Yield",
                    description: "Aksje handles til 200 kr, √•rlig dividende = 8 kr. Beregn dividend yield.",
                    data: { price: 200, dividend: 8 },
                    solution: { yield: 4.0, tolerance: 0.1 },
                    formula: "Dividend Yield = D/P = 8/200 = 4%"
                },
                
                // ========== ANNUITET ==========
                {
                    id: "cf_ann_001",
                    topic: "annuity",
                    difficulty: "easy",
                    type: "calculation",
                    title: "Annuitetsl√•n",
                    description: "L√•n 1 000 000 kr, 5 √•r, 5% rente. Beregn √•rlig annuitet.",
                    data: { principal: 1000000, years: 5, rate: 0.05 },
                    solution: { annuity: 230975, tolerance: 100 },
                    formula: "PMT = PV √ó [r(1+r)^n] / [(1+r)^n - 1]"
                },
                {
                    id: "cf_ann_002",
                    topic: "annuity",
                    difficulty: "medium",
                    type: "calculation",
                    title: "Perpetuity",
                    description: "Du vil ha 50 000 kr √•rlig for alltid. r = 5%. Hvor mye m√• du investere i dag?",
                    data: { cashflow: 50000, rate: 0.05 },
                    solution: { pv: 1000000, tolerance: 0 },
                    formula: "PV = C/r = 50 000 / 0.05 = 1 000 000"
                }
            ]
        };
        
        // ==========================================
        // FUNCTIONS
        // ==========================================
        
        function log(message, type = 'info') {
            const logEl = document.getElementById('log');
            const entry = document.createElement('div');
            entry.className = 'log-entry log-' + type;
            entry.textContent = '[' + new Date().toLocaleTimeString() + '] ' + message;
            logEl.insertBefore(entry, logEl.firstChild);
        }
        
        function updateStats() {
            const exercises = CORPORATE_FINANCE_DATA.exercises;
            document.getElementById('total-questions').textContent = exercises.length;
            document.getElementById('npv-count').textContent = exercises.filter(e => e.topic === 'npv' || e.topic === 'irr').length;
            document.getElementById('wacc-count').textContent = exercises.filter(e => e.topic === 'wacc' || e.topic === 'capm').length;
            document.getElementById('bonds-count').textContent = exercises.filter(e => e.topic === 'bonds').length;
            document.getElementById('portfolio-count').textContent = exercises.filter(e => e.topic === 'portfolio' || e.topic === 'options').length;
        }
        
        function setProgress(percent) {
            document.getElementById('progress').style.width = percent + '%';
        }
        
        // Auth check
        auth.onAuthStateChanged(async (user) => {
            if (!user) {
                document.getElementById('user-email').textContent = 'Ikke logget inn';
                document.getElementById('seed-btn').disabled = true;
                document.getElementById('clear-btn').disabled = true;
                log('Du m√• logge inn for √• seede data', 'error');
                return;
            }
            
            document.getElementById('user-email').textContent = user.email;
            document.getElementById('user-uid').textContent = user.uid;
            
            if (user.uid !== ADMIN_UID) {
                log('‚ö†Ô∏è Du er ikke admin - seeding er deaktivert', 'error');
                document.getElementById('seed-btn').disabled = true;
                document.getElementById('clear-btn').disabled = true;
            } else {
                log('‚úÖ Admin verifisert - klar til √• seede', 'success');
            }
            
            updateStats();
        });
        
        async function seedAll() {
            const btn = document.getElementById('seed-btn');
            btn.disabled = true;
            btn.textContent = '‚è≥ Seeder...';
            
            try {
                const exercises = CORPORATE_FINANCE_DATA.exercises;
                const total = exercises.length;
                let count = 0;
                let errors = 0;
                
                log('Starter seeding av ' + total + ' oppgaver...', 'info');
                
                // Seed metadata
                await db.ref('corporateFinance/metadata').set(CORPORATE_FINANCE_DATA.metadata);
                log('‚úÖ Metadata seedet', 'success');
                
                // Seed each exercise
                for (const exercise of exercises) {
                    try {
                        await db.ref('corporateFinance/exercises/' + exercise.id).set(exercise);
                        count++;
                        setProgress((count / total) * 100);
                        
                        if (count % 5 === 0) {
                            log('Lastet opp ' + count + '/' + total + '...', 'info');
                        }
                    } catch (error) {
                        errors++;
                        log('‚ùå Feil ved ' + exercise.id + ': ' + error.message, 'error');
                    }
                }
                
                log('üéâ Ferdig! ' + count + ' oppgaver lastet opp, ' + errors + ' feil', 'success');
                
            } catch (error) {
                log('‚ùå Kritisk feil: ' + error.message, 'error');
            }
            
            btn.disabled = false;
            btn.textContent = 'üå± Seed Alt (Sp√∏rsm√•l + L√∏sninger)';
        }
        
        async function clearAll() {
            if (!confirm('Er du HELT sikker p√• at du vil slette alle Corporate Finance data?')) return;
            
            try {
                await db.ref('corporateFinance').remove();
                log('üóëÔ∏è Alle Corporate Finance data slettet', 'success');
            } catch (error) {
                log('‚ùå Feil: ' + error.message, 'error');
            }
        }
        
        async function checkExisting() {
            try {
                const snap = await db.ref('corporateFinance/exercises').once('value');
                const data = snap.val();
                
                if (data) {
                    const count = Object.keys(data).length;
                    log('üìä Fant ' + count + ' eksisterende oppgaver i databasen', 'success');
                } else {
                    log('üìä Ingen oppgaver funnet i databasen', 'info');
                }
            } catch (error) {
                log('‚ùå Feil ved sjekk: ' + error.message, 'error');
            }
        }
        
        // Init
        updateStats();
        log('Klar til √• seede Corporate Finance data', 'info');
    </script>
</body>
</html>
